<!DOCTYPE html>
<html lang="es" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoftHair AI - Inteligencia para el Retail de Belleza</title>
    
    <meta name="description" content="SoftHair AI: La plataforma de IA que transforma la experiencia en el punto de venta y e-commerce, aumentando la conversión a través de diagnósticos capilares precisos.">
    <meta property="og:title" content="SoftHair AI - Inteligencia para el Retail de Belleza">
    <meta property="og:description" content="Aumente su tasa de conversión y obtenga datos de mercado sin precedentes con nuestro sistema de diagnóstico inteligente.">
    <meta property="og:image" content="https://i.imgur.com/g8e8s1g.png">
    <meta property="og:url" content="URL_DE_TU_PAGINA_VERCEL">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✨</text></svg>">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-base: #F8F8FA; --color-text: #2C3E50; --color-primary: #3498DB;
            --color-secondary: #1ABC9C; --color-white: #FFFFFF; --color-border: #E5E7EB;
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        *, ::before, ::after { box-sizing: border-box; }
        body { margin: 0; font-family: 'Inter', sans-serif; line-height: 1.6; background-color: var(--color-base); color: var(--color-text); }
        .container { max-width: 1100px; margin-left: auto; margin-right: auto; padding: 0 1.5rem; }
        section { padding: 5rem 0; overflow: hidden; }
        h2 { font-size: 2.75rem; font-weight: 800; margin: 0 0 1rem 0; line-height: 1.2; }
        h3 { font-size: 2.25rem; font-weight: 700; margin: 0 0 1rem 0; line-height: 1.3; }
        h4 { font-size: 1.25rem; font-weight: 600; margin: 0 0 1rem 0; color: var(--color-text); }
        p { margin: 0 0 1rem 0; color: #5a6877; font-size: 1.1rem; }
        a { color: var(--color-primary); text-decoration: none; font-weight: 600; }
        .text-center { text-align: center; }
        .section-header { text-align: center; max-width: 700px; margin: 0 auto 4rem auto; }
        .grid { display: grid; gap: 2rem; }
        .on-scroll { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .on-scroll.is-visible { opacity: 1; transform: translateY(0); }
        .header { padding: 1rem 0; background-color: rgba(255, 255, 255, 0.9); border-bottom: 1px solid var(--color-border); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .header-logo { font-size: 1.5rem; font-weight: 800; } .header-logo span { color: var(--color-primary); }
        .header-nav a { position: relative; margin-left: 2rem; font-weight: 600; color: var(--color-text); transition: color 0.2s ease; }
        .header-nav a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background-color: var(--color-primary); transition: width 0.3s ease; }
        .header-nav a.active { color: var(--color-primary); } .header-nav a.active::after { width: 100%; }
        .btn { display: inline-block; background: linear-gradient(45deg, var(--color-primary), #2980b9); color: var(--color-white); padding: 0.85rem 2.5rem; border-radius: 9999px; font-weight: 700; border: none; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 7px 20px rgba(52, 152, 219, 0.3); }
        .card { background-color: var(--color-white); border: 1px solid var(--color-border); border-radius: 0.75rem; padding: 2rem; box-shadow: var(--shadow-sm); }
        .card h4 { display: flex; align-items: center; gap: 0.75rem; } .card svg { color: var(--color-primary); flex-shrink: 0; }
        .bg-white { background-color: var(--color-white); }
        .footer { background-color: var(--color-text); color: #aeb9c5; text-align: center; padding: 2rem 0; }
        /* --- Estilos de Secciones Específicas --- */
        #hero { padding: 8rem 0; position: relative; color: var(--color-white); }
        #hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(44, 62, 80, 0.6); z-index: 1; }
        #hero .container { position: relative; z-index: 2; }
        #hero h2 { color: var(--color-white); }
        #hero p { color: rgba(255, 255, 255, 0.9); }
        #quiz-container { background-color: var(--color-white); border-radius: 0.75rem; padding: 2.5rem; box-shadow: var(--shadow-md); max-width: 800px; margin: auto; min-height: 500px; display: flex; flex-direction: column; justify-content: center; text-align: center; transition: all 0.3s ease; }
        .quiz-step-indicator { font-weight: 600; color: var(--color-primary); margin-bottom: 0.5rem; }
        .quiz-question-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 2rem; }
        .quiz-options { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; }
        .quiz-option-btn { background-color: var(--color-white); border: 2px solid var(--color-border); padding: 0.75rem 1.5rem; border-radius: 9999px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .quiz-option-btn:hover, .quiz-option-visual:hover { border-color: var(--color-primary); color: var(--color-primary); transform: translateY(-2px); }
        .quiz-option-btn.selected, .quiz-option-visual.selected { border-color: var(--color-secondary); background-color: #f0fbf8; }
        .quiz-option-visual { cursor: pointer; border: 2px solid var(--color-border); border-radius: 0.5rem; padding: 1rem; transition: all 0.2s ease; text-align: center; flex-basis: 150px; flex-grow: 1; }
        .quiz-option-visual svg { margin: 0 auto 0.5rem auto; display: block; }
        .quiz-result-grid { display: grid; gap: 2rem; text-align: left; }
        .result-section { background-color: var(--color-base); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid var(--color-primary); }
        .result-section h5 { margin: 0 0 0.5rem 0; font-size: 1.1rem; font-weight: 700; }
        .product-card { display: flex; align-items: center; gap: 1rem; margin-top: 1rem; }
        .product-card-img { flex-shrink: 0; width: 60px; height: 60px; background-color: var(--color-secondary); border-radius: 50%; }
        .testimonial-card { text-align: center; }
        .testimonial-card blockquote { font-style: italic; font-size: 1.1rem; color: #5a6877; border-left: 3px solid var(--color-primary); padding-left: 1.5rem; text-align: left; margin: 0 0 1rem 0; }
        .testimonial-card .author { font-weight: 700; }
        .faq-item { border-bottom: 1px solid var(--color-border); padding: 1.5rem 0; }
        .faq-item summary { font-weight: 600; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .faq-item summary::after { content: '+'; font-size: 1.5rem; transition: transform 0.2s; }
        .faq-item[open] summary::after { content: '-'; }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 48px; height: 48px; border-radius: 50%; border-left-color: var(--color-primary); animation: spin 1s ease infinite; margin: 2rem auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (min-width: 768px) { .grid-cols-md-2 { grid-template-columns: repeat(2, 1fr); } .grid-cols-md-3 { grid-template-columns: repeat(3, 1fr); } .quiz-result-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <div class="header-logo">SoftHair <span>AI</span></div>
            <nav class="header-nav">
                <a href="#problema">El Problema</a>
                <a href="#solucion">Solución</a>
                <a href="#modelo">Planes</a>
                <a href="#dashboard">Dashboard</a>
                <a href="#contacto">Contacto</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" style="background-image: url('https://source.unsplash.com/1600x900/?beauty,salon,cosmetics'); background-size: cover; background-position: center center;">
            <div class="container text-center">
                <h2 style="font-size: 3.5rem;">Transforme la Confusión de sus Clientes en su Mayor Activo</h2>
                <p style="font-size: 1.25rem; max-width: 700px; margin: 1rem auto 2.5rem auto;">Nuestra plataforma de IA se integra en sus canales de venta para convertir la incertidumbre del cliente en una venta segura y, a la vez, en un activo de datos sin precedentes.</p>
                <a href="#contacto" class="btn">Solicitar una Demo</a>
            </div>
        </section>

        <section id="problema" class="bg-white">
            <div class="container">
                <div class="section-header on-scroll">
                    <h3>El Problema: Un Mercado que Opera a Ciegas</h3>
                    <p>En el competitivo retail de belleza, cada cliente indeciso es una venta perdida. La falta de un asesoramiento certero en el punto de venta, tanto físico como online, genera frustración y reduce drásticamente el potencial de conversión.</p>
                </div>
                <div class="grid grid-cols-md-2">
                    <div class="card on-scroll">
                        <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>Para el Consumidor Final</h4>
                        <p>Abrumado por un exceso de opciones, el cliente compra basándose en intuiciones, lo que resulta en productos inadecuados, insatisfacción y pérdida de confianza en las marcas y tiendas.</p>
                    </div>
                    <div class="card on-scroll">
                        <h4><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="10" width="18" height="12" rx="2"></rect><path d="M7 10V7a5 5 0 0 1 10 0v3"></path></svg>Para su Negocio</h4>
                        <p>La indecisión del cliente se traduce directamente en carritos abandonados, una baja tasa de conversión y un ticket promedio inferior al potencial, afectando sus resultados finales.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="solucion">
            <div class="container">
                <div class="section-header on-scroll">
                    <h3>La Consulta Capilar de Precisión</h3>
                    <p>Vea cómo nuestra IA guía a sus clientes a través de una consulta experta, visual e intuitiva que finaliza con un protocolo de tratamiento personalizado, aumentando la confianza y la disposición a comprar.</p>
                </div>
                <div id="quiz-container" class="on-scroll">
                    </div>
            </div>
        </section>
        
        <section id="modelo" class="bg-white">
            <div class="container">
                <div class="section-header on-scroll">
                    <h3>Planes Diseñados para su Crecimiento</h3>
                    <p>Soluciones escalables y sin sorpresas. Elija el plan que mejor se adapte a las necesidades de su negocio hoy.</p>
                </div>
                <div class="grid grid-cols-md-3" style="align-items: flex-start;">
                    <div class="card price-card on-scroll">
                        <h5>Starter</h5><div class="price">$80<span>/mes</span></div><p>Diseñado para salones y tiendas individuales que buscan digitalizar su asesoramiento.</p><ul><li>✔️ Diagnósticos Ilimitados</li><li>✔️ Reportes de Ventas Básicos</li><li>✔️ Soporte por Email</li></ul>
                    </div>
                    <div class="card price-card featured on-scroll">
                        <div class="featured-badge">Más Popular</div>
                        <h5>Business</h5><div class="price">$250<span>/mes</span></div><p>Diseñado para cadenas y retailers que necesitan analítica avanzada para competir.</p><ul><li>✔️ Todo en Starter, y además:</li><li>✔️ **Dashboard de Analítica Avanzada**</li><li>✔️ **Personalización con su Marca**</li><li>✔️ Soporte Prioritario</li></ul>
                    </div>
                    <div class="card price-card on-scroll">
                         <h5>Enterprise</h5><div class="price">A Consulta</div><p>Soluciones a medida para grandes corporaciones con necesidades de integración específicas.</p><ul><li>✔️ Todo en Business, y además:</li><li>✔️ **Integraciones con su E-commerce/API**</li><li>✔️ Soporte con Mánager Dedicado</li><li>✔️ Paneles de Datos a Medida</li></ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="testimonials">
             <div class="container">
                <div class="section-header on-scroll">
                    <h3>Validado por Negocios como el Suyo</h3>
                    <p>Nuestros primeros socios ya están viendo el impacto directo de implementar una venta basada en datos.</p>
                </div>
                <div class="grid grid-cols-md-2">
                    <div class="card testimonial-card on-scroll">
                        <blockquote>"Desde que instalamos el tótem, las ventas de rutinas completas se han disparado. Los clientes se sienten seguros con la recomendación y nuestro equipo puede enfocarse en ofrecer un servicio excelente."</blockquote>
                        <p class="author">- Dueña de Salón de Belleza Premium</p>
                    </div>
                     <div class="card testimonial-card on-scroll">
                        <blockquote>"La integración en nuestro e-commerce fue simple y el resultado inmediato. Vimos una reducción del 15% en el abandono de carritos en la categoría capilar. Los datos que obtenemos son oro puro."</blockquote>
                        <p class="author">- Gerente de E-commerce, Cadena de Perfumerías</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="dashboard" class="bg-white">
            <div class="container">
                <div class="section-header on-scroll">
                    <h3>Su Centro de Inteligencia de Negocio</h3>
                    <p>Nuestro Dashboard de Analítica le da una visión sin precedentes de las necesidades de sus clientes. Optimice su stock, personalice sus ofertas y tome decisiones estratégicas basadas en información real.</p>
                </div>
                <div class="grid grid-cols-md-3 gap-6 on-scroll">
                    <div class="kpi-card"><div class="kpi-card-value">1,245</div><div class="kpi-card-label">Diagnósticos este mes</div></div>
                    <div class="kpi-card"><div class="kpi-card-value">32%</div><div class="kpi-card-label">Tasa de Conversión</div></div>
                    <div class="kpi-card"><div class="kpi-card-value">+$8,760</div><div class="kpi-card-label">Ventas Atribuidas</div></div>
                </div>
                <div class="grid grid-cols-md-2" style="margin-top: 2rem; gap: 2rem;">
                    <div class="chart-container on-scroll"><canvas id="hairTypeChart"></canvas></div>
                    <div class="chart-container on-scroll"><canvas id="concernsChart"></canvas></div>
                </div>
            </div>
        </section>

         <section id="faq">
            <div class="container" style="max-width: 800px;">
                <div class="section-header on-scroll">
                    <h3>Preguntas Frecuentes</h3>
                </div>
                <div class="on-scroll">
                    <details class="faq-item">
                        <summary>¿La integración con mi e-commerce es complicada?</summary>
                        <p style="padding-top: 1rem;">No. Nuestro sistema se integra con las principales plataformas como Shopify, WooCommerce y otras a través de un simple widget o una API, dependiendo de su plan. Nuestro equipo de soporte le asiste en todo el proceso.</p>
                    </details>
                    <details class="faq-item">
                        <summary>¿Qué hardware necesito para la tienda física?</summary>
                        <p style="padding-top: 1rem;">Puede utilizar cualquier tablet (iPad, Android) o un tótem con pantalla táctil. Nuestro software es basado en web y se adapta a cualquier dispositivo moderno sin necesidad de hardware específico.</p>
                    </details>
                    <details class="faq-item">
                        <summary>¿La información de mis clientes está segura?</summary>
                        <p style="padding-top: 1rem;">Absolutamente. La seguridad es nuestra máxima prioridad. Todos los datos son anonimizados para la analítica agregada y cumplimos con los más altos estándares de protección de datos. La información personal del cliente (como el email para recibir su rutina) se maneja de forma segura y confidencial.</p>
                    </details>
                </div>
            </div>
        </section>

        <section id="contacto" style="background-color: #34495e; color: #ecf0f1;">
            <div class="container text-center on-scroll">
                <h3>Vea el Poder de los Datos en Acción</h3>
                <p style="color: #bdc3c7;">Agende una demo. Le mostraremos la plataforma, sus funcionalidades de analítica y cómo se integra en sus operaciones para generar resultados medibles.</p>
                <div style="margin-top: 2rem;"><a href="mailto:ventas@softhairai.com?subject=Solicitud de Demo de SoftHair AI" class="btn">Agendar mi Demo</a></div>
            </div>
        </section>
    </main>

    <footer class="footer"><div class="container"><p style="color: #aeb9c5; margin:0;">&copy; 2025 SoftHair AI. Todos los derechos reservados.</p></div></footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    try {
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.header-nav a');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    const navLink = document.querySelector(`.header-nav a[href="#${id}"]`);
                    if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                        navLinks.forEach(link => link.classList.remove('active'));
                        if (navLink) navLink.classList.add('active');
                    }
                });
            }, { rootMargin: '-40% 0px -60% 0px', threshold: 0 });
            sections.forEach(section => observer.observe(section));

            const onScrollObserver = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        obs.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.on-scroll').forEach(el => onScrollObserver.observe(el));
            
            const quizContainer = document.getElementById('quiz-container');
            const quizSteps = [
                { type: 'welcome' },
                { type: 'visual-choice', key: 'forma', question: 'Para comenzar, identifique la forma natural de su cabello.', options: [ { value: 'Liso', svg: '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />' }, { value: 'Ondulado', svg: '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75c3.125 5 8.125 5 11.25 0s8.125 5 11.25 0M3.75 12c3.125 5 8.125 5 11.25 0s8.125 5 11.25 0" />' }, { value: 'Rizado', svg: '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6a8.25 8.25 0 0116.5 0M3.75 12a8.25 8.25 0 0116.5 0" />' }, { value: 'Afro', svg: '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 7.5a4.125 4.125 0 118.25 0a4.125 4.125 0 11-8.25 0m12.375 0a4.125 4.125 0 118.25 0a4.125 4.125 0 11-8.25 0m-16.5 7.5a4.125 4.125 0 118.25 0a4.125 4.125 0 11-8.25 0m12.375 0a4.125 4.125 0 118.25 0a4.125 4.125 0 11-8.25 0" />' } ] },
                { type: 'visual-choice', key: 'grosor', question: 'Al tacto, ¿cómo siente una hebra individual de su cabello?', options: [ { value: 'Fino', svg: '<path stroke-linecap="round" stroke-linejoin="round" d="M18 12H6" />' }, { value: 'Medio', svg: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M18 12H6" />' }, { value: 'Grueso', svg: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="6" d="M18 12H6" />' } ] },
                { type: 'visual-choice', key: 'densidad', question: 'Al separar su cabello, ¿cuánto cuero cabelludo puede ver?', options: [ { value: 'Baja', label: 'Baja (se ve fácilmente)', svg: '<circle cx="12" cy="12" r="3"/><circle cx="6" cy="7" r="1"/><circle cx="18" cy="7" r="1"/><circle cx="6" cy="17" r="1"/><circle cx="18" cy="17" r="1"/>' }, { value: 'Media', label: 'Media (algo visible)', svg: '<circle cx="12" cy="12" r="2"/><circle cx="7" cy="7" r="1.5"/><circle cx="17" cy="7" r="1.5"/><circle cx="7" cy="17" r="1.5"/><circle cx="17" cy="17" r="1.5"/><circle cx="12" cy="6" r="1.5"/><circle cx="12" cy="18" r="1.5"/>' }, { value: 'Alta', label: 'Alta (casi no se ve)', svg: '<circle cx="12" cy="12" r="1.5"/><circle cx="7" cy="7" r="1.5"/><circle cx="17" cy="7" r="1.5"/><circle cx="7" cy="17" r="1.5"/><circle cx="17" cy="17" r="1.5"/><circle cx="12" cy="6" r="1.5"/><circle cx="12" cy="18" r="1.5"/><circle cx="6" cy="12" r="1.5"/><circle cx="18" cy="12" r="1.5"/>' } ] },
                { type: 'text-choice', key: 'cuero', question: 'El equilibrio de su cuero cabelludo es fundamental. ¿Cómo lo siente habitualmente?', options: ['Equilibrado (Normal)', 'Con Tendencia Grasa', 'Con Tendencia Seca', 'Sensible / Irritado'] },
                { type: 'text-choice', key: 'objetivo', question: 'Excelente. Ahora, ¿cuál es su objetivo principal?', options: ['Reducir Frizz', 'Aportar Volumen', 'Reparar Daño', 'Definir Rizos', 'Aumentar Brillo'] },
                { type: 'text-choice', key: 'quimicos', question: '¿Su cabello ha sido sometido a tratamientos químicos?', options: ['Natural, sin tratamientos', 'Teñido', 'Decolorado o con mechas', 'Alisado permanente'] },
                { type: 'text-choice', key: 'habitos', question: 'Finalmente, ¿qué gama de productos utiliza mayormente?', options: ['De Supermercado', 'Profesionales / Salón', 'Naturales / Orgánicos', 'No tengo rutina fija'] },
                { type: 'analyzing' },
                { type: 'result' }
            ];
            let currentStep = 0;
            let userAnswers = {};

            const renderQuizStep = () => {
                if (!quizContainer) return;
                const stepData = quizSteps[currentStep];
                let html = '';
                const stepIndicator = currentStep > 0 && stepData.type !== 'analyzing' && stepData.type !== 'result' ? `<div class="quiz-step-indicator">PASO ${currentStep} DE ${quizSteps.length - 2}</div>` : '';
                
                switch (stepData.type) {
                    case 'welcome':
                        html = `<h3 class="quiz-question-title">Inicie su Consulta Capilar de Precisión</h3><p>Nuestro sistema de IA, diseñado por tricólogos, analizará su perfil para crear su rutina ideal. El proceso es rápido, visual y 100% confidencial.</p><button class="btn quiz-action" data-action="start">Comenzar</button>`;
                        break;
                    case 'visual-choice':
                        html = `${stepIndicator}<h4 class="quiz-question-title">${stepData.question}</h4><div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">${stepData.options.map(opt => `<div class="quiz-option-visual quiz-action" data-action="answer" data-value="${opt.value}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="64" height="64">${opt.svg}</svg><p style="font-weight: 600; margin: 0.5rem 0 0 0;">${opt.label || opt.value}</p></div>`).join('')}</div>`;
                        break;
                    case 'text-choice':
                        html = `${stepIndicator}<h4 class="quiz-question-title">${stepData.question}</h4><div class="quiz-options">${stepData.options.map(opt => `<button class="quiz-option-btn quiz-action" data-action="answer" data-value="${opt}">${opt}</button>`).join('')}</div>`;
                        break;
                    case 'analyzing':
                        html = `<h4 class="quiz-question-title">Analizando su perfil...</h4><div class="spinner"></div><p>Cruzando sus 7 puntos de datos con nuestra base de conocimiento para generar su protocolo personalizado.</p>`;
                        setTimeout(() => { currentStep++; renderQuizStep(); }, 2500);
                        break;
                    case 'result':
                        html = `<h3 class="quiz-question-title">Su Protocolo Personalizado SoftHair AI</h3>
                            <div class="quiz-result-grid">
                                <div class="result-section">
                                    <h5>Tu Diagnóstico Completo</h5>
                                    <p>Tras analizar sus respuestas, nuestro sistema IA concluye que su perfil es: <strong>Cabello ${userAnswers.forma}, de estructura ${userAnswers.grosor} y ${userAnswers.densidad} densidad.</strong></p>
                                    <p>Su cuero cabelludo es <strong>${userAnswers.cuero}</strong> y su historial de <strong>${userAnswers.quimicos}</strong> requiere un enfoque en la ${userAnswers.objetivo === 'Reparar Daño' ? 'reparación' : 'protección'}.</p>
                                </div>
                                <div class="result-section">
                                    <h5>Tu Rutina de Aplicación</h5>
                                    <p><strong>1. Lavado (2-3 veces/semana):</strong> Aplique el Shampoo Hydro-Nutritivo solo en el cuero cabelludo.</p>
                                    <p><strong>2. Acondicionamiento:</strong> De medios a puntas, evite la raíz. Deje actuar 2 minutos.</p>
                                    <p><strong>3. Sellado:</strong> Con el cabello húmedo, aplique 2-3 gotas del Sérum Anti-Frizz.</p>
                                    <p><strong>Tip Profesional:</strong> Nunca frote su cabello con la toalla. Presione suavemente para quitar el exceso de agua.</p>
                                </div>
                                <div class="result-section" style="grid-column: 1 / -1;">
                                    <h5>Protocolo Recomendado: Kit "Hidratación y Control"</h5>
                                    <div class="product-card"><div class="product-card-img"></div><div class="product-card-info"><h4>Shampoo Hydro-Nutritivo</h4><p><strong>Ingredientes Clave:</strong> Aceite de Argán (nutrición), Pantenol (Vitamina B5, humectante).</p></div></div>
                                    <div class="product-card"><div class="product-card-img"></div><div class="product-card-info"><h4>Acondicionador Sellador</h4><p><strong>Ingredientes Clave:</strong> Proteínas de Seda (suavidad), Keratina Vegetal (fortaleza).</p></div></div>
                                    <div class="product-card"><div class="product-card-img"></div><div class="product-card-info"><h4>Sérum Anti-Frizz</h4><p><strong>Ingredientes Clave:</strong> Ciclometicona (protector térmico), Aceite de Lino (brillo).</p></div></div>
                                </div>
                            </div>
                            <button class="btn quiz-action" data-action="restart" style="margin-top: 2rem;">Realizar otra consulta</button>`;
                        break;
                }
                quizContainer.innerHTML = html;
            };

            quizContainer.addEventListener('click', e => {
                const target = e.target.closest('.quiz-action');
                if (!target) return;
                const { action, value } = target.dataset;
                if (action === 'start' || action === 'answer') {
                    if (action === 'answer') userAnswers[quizSteps[currentStep].key] = value;
                    currentStep++;
                    renderQuizStep();
                } else if (action === 'restart') {
                    currentStep = 0; userAnswers = {}; renderQuizStep();
                }
            });
            if(quizContainer) renderQuizStep();

            const chartObserver = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const chartId = entry.target.id;
                        if(typeof Chart !== 'undefined') {
                            if (chartId === 'hairTypeChart') new Chart(entry.target, { type: 'bar', data: { labels: ['Liso', 'Ondulado', 'Rizado', 'Afro'], datasets: [{ label: 'Diagnósticos', data: [400, 350, 290, 205], backgroundColor: 'rgba(52, 152, 219, 0.7)' }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Tipos de Cabello de sus Clientes' }, legend: { display: false } } } });
                            if (chartId === 'concernsChart') new Chart(entry.target, { type: 'doughnut', data: { labels: ['Frizz', 'Sequedad', 'Daño', 'Caída', 'Grasa'], datasets: [{ data: [350, 280, 220, 180, 150], backgroundColor: ['#3498db', '#1abc9c', '#f1c40f', '#e74c3c', '#9b59b6'] }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Principales Preocupaciones' } } } });
                            obs.unobserve(entry.target);
                        }
                    }
                });
            }, { threshold: 0.5 });
            document.querySelectorAll('canvas').forEach(canvas => chartObserver.observe(canvas));
        });
    } catch (e) {
        console.error("Error al inicializar la página:", e);
        document.body.innerHTML = `<h1>Error al cargar la página</h1><p>Ocurrió un error inesperado. Por favor, recargue la página o contacte a soporte.</p>`;
    }
    </script>
</body>
</html>
